&lt;dx:ThemedWindow x:Class="Revit_FA_Tools.Revit.UI.Views.Addressing.ModernAddressingPanelWindow"
                xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
                xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
                xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
                xmlns:dxlc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol"
                xmlns:dxdo="http://schemas.devexpress.com/winfx/2008/xaml/docking"
                Title="Device Addressing Panel - Modern Interface"
                Height="800" Width="1200"
                MinHeight="600" MinWidth="800"
                WindowStartupLocation="CenterScreen"
                ShowInTaskbar="False">

    <dx:ThemedWindow.Resources>
        <Style x:Key="StatusTextStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Margin" Value="5,2"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>
        
        <Style x:Key="ActionButtonStyle" TargetType="Button">
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="MinWidth" Value="100"/>
        </Style>
    </dx:ThemedWindow.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        &lt;!-- Toolbar --&gt;
        <Border Grid.Row="0" Background="{dx:ThemeResource {dx:ThemeResourceKey ResourceKey=PanelBackgroundBrush}}" 
                BorderBrush="{dx:ThemeResource {dx:ThemeResourceKey ResourceKey=BorderBrush}}" 
                BorderThickness="0,0,0,1" Padding="10">
            <StackPanel Orientation="Horizontal">
                <Button Content="Load Data" Command="{Binding LoadDataCommand}" Style="{StaticResource ActionButtonStyle}"/>
                <Button Content="Auto Assign All" Command="{Binding AutoAssignAllCommand}" Style="{StaticResource ActionButtonStyle}"/>
                <Button Content="Validate Panel" Command="{Binding ValidatePanelCommand}" Style="{StaticResource ActionButtonStyle}"/>
                <Button Content="Balance Circuits" Command="{Binding BalanceCircuitsCommand}" Style="{StaticResource ActionButtonStyle}"/>
                <Separator/>
                <Button Content="Export" Command="{Binding ExportDataCommand}" Style="{StaticResource ActionButtonStyle}"/>
                <Button Content="Import" Command="{Binding ImportDataCommand}" Style="{StaticResource ActionButtonStyle}"/>
                <Separator/>
                <Button Content="Apply Changes" Command="{Binding ApplyChangesCommand}" Style="{StaticResource ActionButtonStyle}"/>
                <Button Content="Revert" Command="{Binding RevertChangesCommand}" Style="{StaticResource ActionButtonStyle}"/>
            </StackPanel>
        </Border>

        &lt;!-- Main Content --&gt;
        <dxdo:DockLayoutManager Grid.Row="1">
            
            &lt;!-- Left Panel - Panels and Circuits --&gt;
            <dxdo:LayoutPanel Caption="Addressing Panels" 
                             DockType="Left" 
                             AllowClose="False" 
                             AllowFloat="False"
                             ItemWidth="300">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="2*"/>
                    </Grid.RowDefinitions>

                    &lt;!-- Panels Tree --&gt;
                    <GroupBox Grid.Row="0" Header="Panels" Margin="5">
                        <TreeView ItemsSource="{Binding Panels}" SelectedItem="{Binding SelectedPanel}">
                            <TreeView.ItemTemplate>
                                <HierarchicalDataTemplate ItemsSource="{Binding Circuits}">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="ðŸ“‹" Margin="0,0,5,0"/>
                                        <TextBlock Text="{Binding PanelId}" FontWeight="Bold"/>
                                        <TextBlock Text="{Binding TotalDevices, StringFormat=' ({0} devices)'}" 
                                                 Foreground="Gray" Margin="5,0,0,0"/>
                                    </StackPanel>
                                    <HierarchicalDataTemplate.ItemTemplate>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="ðŸ”Œ" Margin="0,0,5,0"/>
                                                <TextBlock Text="{Binding CircuitNumber}"/>
                                                <TextBlock Text="{Binding DeviceCount, StringFormat=' ({0})'}" 
                                                         Foreground="Gray" Margin="3,0,0,0"/>
                                                <Rectangle Width="50" Height="8" Margin="5,0" 
                                                         Fill="{Binding UtilizationColor}"/>
                                                <TextBlock Text="{Binding DeviceUtilization, StringFormat='{0:P1}'}" 
                                                         FontSize="10" Foreground="Gray"/>
                                            </StackPanel>
                                        </DataTemplate>
                                    </HierarchicalDataTemplate.ItemTemplate>
                                </HierarchicalDataTemplate>
                            </TreeView.ItemTemplate>
                        </TreeView>
                    </GroupBox>

                    <Separator Grid.Row="1" Margin="5"/>

                    &lt;!-- Unassigned Devices --&gt;
                    <GroupBox Grid.Row="2" Header="Unassigned Devices" Margin="5">
                        <dxg:GridControl ItemsSource="{Binding UnassignedDevices}" 
                                        SelectedItem="{Binding SelectedDevice}"
                                        AutoGenerateColumns="False">
                            <dxg:GridControl.Columns>
                                <dxg:GridColumn FieldName="DeviceType" Header="Type" Width="80"/>
                                <dxg:GridColumn FieldName="Level" Header="Level" Width="60"/>
                                <dxg:GridColumn FieldName="Room" Header="Room" Width="100"/>
                                <dxg:GridColumn FieldName="CurrentDraw" Header="Current" Width="60">
                                    <dxg:GridColumn.DisplayTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Value, StringFormat='{0:F2}A'}"/>
                                        </DataTemplate>
                                    </dxg:GridColumn.DisplayTemplate>
                                </dxg:GridColumn>
                            </dxg:GridControl.Columns>
                            <dxg:GridControl.View>
                                <dxg:TableView ShowGroupPanel="False" AutoWidth="True"/>
                            </dxg:GridControl.View>
                        </dxg:GridControl>
                    </GroupBox>
                </Grid>
            </dxdo:LayoutPanel>

            &lt;!-- Center Panel - Device Assignment Grid --&gt;
            <dxdo:LayoutPanel Caption="Device Assignments" 
                             DockType="Fill" 
                             AllowClose="False" 
                             AllowFloat="False">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    &lt;!-- Circuit Info --&gt;
                    <Border Grid.Row="0" Background="{dx:ThemeResource {dx:ThemeResourceKey ResourceKey=ControlBackgroundBrush}}" 
                           BorderBrush="{dx:ThemeResource {dx:ThemeResourceKey ResourceKey=BorderBrush}}" 
                           BorderThickness="1" Margin="5" Padding="10">
                        <StackPanel Orientation="Horizontal" DataContext="{Binding SelectedPanel}">
                            <TextBlock Text="ðŸ“‹" FontSize="16" Margin="0,0,10,0"/>
                            <TextBlock Text="{Binding PanelId}" FontWeight="Bold" FontSize="14" Margin="0,0,20,0"/>
                            <TextBlock Text="Total Devices:" Style="{StaticResource StatusTextStyle}"/>
                            <TextBlock Text="{Binding TotalDevices}" Style="{StaticResource StatusTextStyle}" FontWeight="Bold"/>
                            <TextBlock Text="Addressed:" Style="{StaticResource StatusTextStyle}" Margin="20,2,5,2"/>
                            <TextBlock Text="{Binding AddressedDevices}" Style="{StaticResource StatusTextStyle}" FontWeight="Bold" Foreground="Green"/>
                            <TextBlock Text="Unaddressed:" Style="{StaticResource StatusTextStyle}" Margin="20,2,5,2"/>
                            <TextBlock Text="{Binding UnaddressedDevices}" Style="{StaticResource StatusTextStyle}" FontWeight="Bold" Foreground="Red"/>
                        </StackPanel>
                    </Border>

                    &lt;!-- Device Grid --&gt;
                    <dxg:GridControl Grid.Row="1" 
                                    ItemsSource="{Binding SelectedPanel.Circuits}" 
                                    AutoGenerateColumns="False"
                                    Margin="5">
                        <dxg:GridControl.Columns>
                            <dxg:GridColumn FieldName="CircuitNumber" Header="Circuit" Width="80"/>
                            <dxg:GridColumn FieldName="DeviceCount" Header="Devices" Width="60"/>
                            <dxg:GridColumn FieldName="DeviceUtilization" Header="Utilization" Width="80">
                                <dxg:GridColumn.DisplayTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <Rectangle Width="40" Height="12" Fill="{Binding UtilizationColor}" Margin="0,0,5,0"/>
                                            <TextBlock Text="{Binding Value, StringFormat='{0:P1}'}" VerticalAlignment="Center"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </dxg:GridColumn.DisplayTemplate>
                            </dxg:GridColumn>
                            <dxg:GridColumn FieldName="TotalCurrent" Header="Current" Width="70">
                                <dxg:GridColumn.DisplayTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding Value, StringFormat='{0:F2}A'}"/>
                                    </DataTemplate>
                                </dxg:GridColumn.DisplayTemplate>
                            </dxg:GridColumn>
                        </dxg:GridControl.Columns>
                        <dxg:GridControl.View>
                            <dxg:TableView ShowGroupPanel="False" AutoWidth="True">
                                <dxg:TableView.RowDetailsTemplate>
                                    <DataTemplate>
                                        <dxg:GridControl ItemsSource="{Binding Devices}" AutoGenerateColumns="False">
                                            <dxg:GridControl.Columns>
                                                <dxg:GridColumn FieldName="Address" Header="Address" Width="60">
                                                    <dxg:GridColumn.EditTemplate>
                                                        <DataTemplate>
                                                            <dxe:TextEdit Text="{Binding Address}" 
                                                                        IsReadOnly="{Binding IsLocked}"
                                                                        Background="{Binding IsLocked, Converter={dx:BoolToObjectConverter TrueValue=LightGray, FalseValue=White}}"/>
                                                        </DataTemplate>
                                                    </dxg:GridColumn.EditTemplate>
                                                </dxg:GridColumn>
                                                <dxg:GridColumn FieldName="DeviceType" Header="Device Type" Width="120"/>
                                                <dxg:GridColumn FieldName="Level" Header="Level" Width="80"/>
                                                <dxg:GridColumn FieldName="Room" Header="Room" Width="120"/>
                                                <dxg:GridColumn FieldName="CurrentDraw" Header="Current (A)" Width="80"/>
                                                <dxg:GridColumn FieldName="LockState" Header="Lock" Width="50">
                                                    <dxg:GridColumn.DisplayTemplate>
                                                        <DataTemplate>
                                                            <TextBlock Text="{Binding LockState, Converter={dx:EnumToStringConverter}}" 
                                                                     Foreground="{Binding IsLocked, Converter={dx:BoolToObjectConverter TrueValue=Red, FalseValue=Green}}"/>
                                                        </DataTemplate>
                                                    </dxg:GridColumn.DisplayTemplate>
                                                </dxg:GridColumn>
                                            </dxg:GridControl.Columns>
                                            <dxg:GridControl.View>
                                                <dxg:TableView ShowGroupPanel="False" AutoWidth="True"/>
                                            </dxg:GridControl.View>
                                        </dxg:GridControl>
                                    </DataTemplate>
                                </dxg:TableView.RowDetailsTemplate>
                            </dxg:TableView>
                        </dxg:GridControl.View>
                    </dxg:GridControl>
                </Grid>
            </dxdo:LayoutPanel>

            &lt;!-- Right Panel - Properties and Actions --&gt;
            <dxdo:LayoutPanel Caption="Properties &amp; Actions" 
                             DockType="Right" 
                             AllowClose="False" 
                             AllowFloat="False"
                             ItemWidth="250">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    &lt;!-- Device Properties --&gt;
                    <GroupBox Grid.Row="0" Header="Selected Device" Margin="5">
                        <StackPanel DataContext="{Binding SelectedDevice}">
                            <dxlc:LayoutControl Orientation="Vertical">
                                <dxlc:LayoutItem Label="Type:">
                                    <TextBlock Text="{Binding DeviceType}"/>
                                </dxlc:LayoutItem>
                                <dxlc:LayoutItem Label="Function:">
                                    <TextBlock Text="{Binding DeviceFunction}"/>
                                </dxlc:LayoutItem>
                                <dxlc:LayoutItem Label="Level:">
                                    <TextBlock Text="{Binding Level}"/>
                                </dxlc:LayoutItem>
                                <dxlc:LayoutItem Label="Room:">
                                    <TextBlock Text="{Binding Room}"/>
                                </dxlc:LayoutItem>
                                <dxlc:LayoutItem Label="Current:">
                                    <TextBlock Text="{Binding CurrentDraw, StringFormat='{0:F2}A'}"/>
                                </dxlc:LayoutItem>
                                <dxlc:LayoutItem Label="Address:">
                                    <dxe:TextEdit Text="{Binding Address}"/>
                                </dxlc:LayoutItem>
                            </dxlc:LayoutControl>
                        </StackPanel>
                    </GroupBox>

                    &lt;!-- Actions --&gt;
                    <GroupBox Grid.Row="1" Header="Actions" Margin="5">
                        <StackPanel>
                            <Button Content="Assign to Selected Circuit" 
                                   Command="{Binding AssignDeviceCommand}" 
                                   Style="{StaticResource ActionButtonStyle}"
                                   Margin="5,10,5,5"/>
                            
                            <Button Content="Remove from Circuit" 
                                   Command="{Binding RemoveDeviceCommand}" 
                                   Style="{StaticResource ActionButtonStyle}"/>
                            
                            <Separator Margin="5,10"/>
                            
                            <TextBlock Text="Auto Assignment Options:" FontWeight="Bold" Margin="5,5,5,10"/>
                            <CheckBox Content="Respect Locks" IsChecked="True" Margin="10,2"/>
                            <CheckBox Content="Optimize by Location" IsChecked="True" Margin="10,2"/>
                            <CheckBox Content="Group by Type" IsChecked="False" Margin="10,2"/>
                            
                            <ComboBox Margin="10,5" SelectedIndex="0">
                                <ComboBoxItem>Sequential Strategy</ComboBoxItem>
                                <ComboBoxItem>By Floor Strategy</ComboBoxItem>
                                <ComboBoxItem>By Zone Strategy</ComboBoxItem>
                                <ComboBoxItem>Optimized Strategy</ComboBoxItem>
                            </ComboBox>
                        </StackPanel>
                    </GroupBox>

                    &lt;!-- Statistics --&gt;
                    <GroupBox Grid.Row="2" Header="Statistics" Margin="5">
                        <StackPanel>
                            <TextBlock Text="{Binding CompletionPercentage, StringFormat='Completion: {0:F1}%'}" 
                                     FontWeight="Bold" Margin="5"/>
                            <ProgressBar Value="{Binding CompletionPercentage}" 
                                       Maximum="100" Height="20" Margin="5"/>
                            <TextBlock Text="{Binding TotalDevices, StringFormat='Total Devices: {0}'}" Margin="5,2"/>
                            <TextBlock Text="{Binding AddressedDevices, StringFormat='Addressed: {0}'}" Margin="5,2" Foreground="Green"/>
                        </StackPanel>
                    </GroupBox>
                </Grid>
            </dxdo:LayoutPanel>
        </dxdo:DockLayoutManager>

        &lt;!-- Status Bar --&gt;
        <Border Grid.Row="2" Background="{dx:ThemeResource {dx:ThemeResourceKey ResourceKey=PanelBackgroundBrush}}" 
               BorderBrush="{dx:ThemeResource {dx:ThemeResourceKey ResourceKey=BorderBrush}}" 
               BorderThickness="0,1,0,0" Padding="10,5">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" Text="{Binding StatusMessage}" 
                          Foreground="{Binding HasValidationErrors, Converter={dx:BoolToObjectConverter TrueValue=Red, FalseValue=Black}}"
                          VerticalAlignment="Center"/>

                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock Text="â—" 
                              Foreground="{Binding HasValidationErrors, Converter={dx:BoolToObjectConverter TrueValue=Red, FalseValue=Green}}" 
                              FontSize="16" Margin="0,0,5,0"/>
                    <TextBlock Text="{Binding HasValidationErrors, Converter={dx:BoolToObjectConverter TrueValue='Errors Present', FalseValue='All Valid'}}"/>
                </StackPanel>

                <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center" Margin="20,0,0,0">
                    <TextBlock Text="Loading..." Visibility="{Binding IsLoading, Converter={dx:BooleanToVisibilityConverter}}"/>
                    <dx:LoadingDecorator IsLoading="{Binding IsLoading}" Margin="10,0,0,0"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</dx:ThemedWindow>